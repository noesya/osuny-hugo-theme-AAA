{{- $template := .block.template -}}
{{- $position := .block.position -}}
{{- $title := .block.title -}}

{{- with .block.data }}
  <div class="block block-agenda{{ if $title }} block-with-title{{ end }}">
    <div class="container">
      <div class="block-content">
        {{ if or $title .description }}
          <div class="top">
            {{ if $title }}
              <p class="block-title">{{ partial "PrepareHTML" $title }}</p>
            {{ end }}
            {{- if .description }}
              <div class="description">
                {{ partial "PrepareHTML" .description }}
              </div>
            {{ end -}}
          </div>
        {{ end -}}

        <div class="events">
          {{ range .events }}
            {{ $event := site.GetPage .file }}
            {{ with $event }}
              {{ partial "events/event" (dict "event" . ) }}
            {{ end -}}
          {{ end -}}
        </div>
      </div>
    </div>
  </div>
{{ end -}}
