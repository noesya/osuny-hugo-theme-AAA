{{ $show_descriptions := .show_descriptions }}
{{ $show_images := .show_images }}

<div class="cards">
  {{ range .elements }}
    <article class="card">
      <h3>
        <a href="{{- .Permalink -}}">
          {{- partial "PrepareHTML" .title -}}
        </a>
      </h3>

      {{ if and $show_descriptions .summary }}
        {{ if site.Params.pages.index.truncate_description }}
          <p>{{ partial "GetTruncateContent" ( dict 
            "text" .summary
            "length" site.Params.pages.index.truncate_description
            ) }}</p>
        {{ else }}
          <p>{{ partial "PrepareText" .summary }}</p>
        {{ end }}
      {{ end }}

      <p class="more meta" aria-hidden="true">{{- i18n "commons.more" -}}</p>

      {{ if $show_images }}
        {{- partial "pages/page-media.html" . -}}
      {{ end }}
    </article>
  {{ end }}
</div>