{{- $direction := "" -}}
{{ if .image }}
  {{- $direction = partial "GetImageDirection" .image -}}
{{ end }}

<header class="hero {{ if .image -}}hero--with-image hero--image-{{- $direction -}}{{- end -}}">
  {{- if .breadcrumb | default true -}}
    {{ partial "header/breadcrumbs.html" .context }}
  {{- end -}}
  <div class="container">
    <div class="content">
      {{- if .subtitle -}}
        <hgroup>
          <h1>{{ partial "PrepareHTML" .title }}</h1>
          <p>{{ partial "PrepareHTML" .subtitle }}</p>
        </hgroup>
      {{- else -}}
        <h1>{{ partial "PrepareHTML" .title }}</h1>
      {{- end -}}
    </div>
    {{- if .image }}
      <figure>
        <a class="glightbox"
          data-glightbox="type: image;{{ if .image.credit }}description: {{ partial "PrepareHTML" .image.credit }}{{ end }}"
          href="{{ partial "GetLightboxUrl" .image }}">
          {{ partial "commons/image.html"
            (dict
              "image"    .image
              "mobile"   "400"
              "tablet"   "800"
              "desktop"  "900"
            ) }}
            {{ if .image.credit }}
              <figcaption tabindex="0">
                <p>
                  {{- partial "GetTextFromHTML" .image.credit -}}
                </p>
              </figcaption>
            {{ end }}
        </a>
      </figure>
    {{ end -}}
  </div>
</header>
